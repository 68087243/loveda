<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta name="Robots" content="noindex,nofollow,noarchive" />
    <title>爱大叔--注册</title>
    <include file="Index:wap_js_css"/>
<body pagename="reg">
<include file="User:uhead"/>
<div class="container">
    <form role="form" id="regbox" onsubmit="return false;">
        <div id="box_1">
            <div class="form-group tc" style="margin-bottom: 0">
                <ul class="relative" style="line-height: 41px; top: 10px;">
                    <li class="fl"><label for="radio1" class="clo6"><input type="radio" id="radio1" name="sex" value="1"/>我是女生</label></li>
                    <li class="fl"><label for="radio2" class="clo6"><input type="radio" id="radio2" name="sex" value="2"/>我是男生</label></li>
                </ul>
            </div>
            <div class="font12 orange relative fr" id="sextit" style="top: -20px;right: 30px;display: none">选择后不可更改</div>
            <div class="form-group">
                <span>用户名</span><input type="text" name="nickname" class="form-control" id="exampleInputUser1" />
            </div>
            <div class="form-group">
                <span>密码</span><input type="password" name="password" placeholder="6-18个字符" class="form-control" id="exampleInputPassword1" />
            </div>
            <div class="form-group">
                <span>确认密码</span><input type="password" name="repassword" placeholder="重复上面的密码" class="form-control" id="exampleInputPassword2" />
            </div>
            <div class="form-group">
                <span>邮箱</span><input type="text" name="email" placeholder="请输入你的邮箱"  class="form-control" id="exampleInputEmail1" />
            </div>
            <div class="form-group">
                <span>QQ</span><input type="text" name="qqid" placeholder="请输入你的QQ"  class="form-control" id="exampleInputqq" />
            </div>
            <div class="form-group">
                <div class="next_btn tc clof" onclick="checkInput();">下一步</div>
            </div>
        </div>

        <div id="box_2" class=" hide">
            <div class="form-group">
                <div style="margin-left: 5px;">身高</div>
                <div class="idealforms_select tc" style="width:100%;">
                    <div class="idealforms_select_obj">
                        <input type="hidden" value="" name="height">
                        <input type="text" value="" readonly>
                        <span class="icaret"></span>
                    </div>
                    <ul class="idealforms_select_menu tc">
                         <?php
                         for($i=145;$i<210;$i++){
                      ?>
                             <li data-value="{$i}">{$i}cm</li>
                         <?php
                           }
                       ?>
                    </ul>
                </div>
            </div>
            <div class="form-group" >
                <div style="margin-left: 5px;">年龄</div>
                <div class="idealforms_select" style="width:100%;">
                    <div class="idealforms_select_obj">
                        <input type="hidden" value="" name="age">
                        <input type="text" value="" readonly>
                        <span class="icaret"></span>
                    </div>
                    <ul class="idealforms_select_menu">
                        <?php
                         for($i=15;$i<80;$i++){
                      ?>
                        <li data-value="{$i}">{$i}</li>
                        <?php
                           }
                       ?>
                    </ul>
                </div>
            </div>
            <div class="form-group">
                <div style="margin-left: 5px;">最高学历</div>
                <div class="idealforms_select tc" style="width:100%;">
                    <div class="idealforms_select_obj">
                        <input type="hidden" value="" name="education">
                        <input type="text" value="" readonly>
                        <span class="icaret"></span>
                    </div>
                    <ul class="idealforms_select_menu tc">
                        <li data-value="">请选择</li>
                        <li data-value="初中及以下">初中及以下</li>
                        <li data-value="中专">中专</li>
                        <li data-value="高中">高中</li>
                        <li data-value="专科">专科</li>
                        <li data-value="本科">本科</li>
                        <li data-value="硕士">硕士</li>
                        <li data-value="博士">博士</li>
                    </ul>
                </div>
            </div>
            <div class="form-group">
                <div style="margin-left: 5px;">婚姻状况</div>
                <div class="idealforms_select tc" style="width:100%;">
                    <div class="idealforms_select_obj">
                        <input type="hidden" value="" name="marriage">
                        <input type="text" value="" readonly>
                        <span class="icaret"></span>
                    </div>
                    <ul class="idealforms_select_menu tc">
                        <li data-value="">请选择</li>
                        <li data-value="未婚">未婚</li>
                        <li data-value="离异">离异</li>
                        <li data-value="丧偶">丧偶</li>
                        <li data-value="非单身">非单身</li>
                    </ul>
                </div>
            </div>
            <div class="form-group">
                <div style="margin-left: 5px;">月收入</div>
                <div class="idealforms_select tc" style="width:100%;">
                    <div class="idealforms_select_obj">
                        <input type="hidden" value="" name="income">
                        <input type="text" value="" readonly>
                        <span class="icaret"></span>
                    </div>
                    <ul class="idealforms_select_menu tc">
                        <li data-value="">请选择</li>
                        <li data-value="3000元以下">3000元以下</li>
                        <li data-value="3001元-5000元">3001元-5000元</li>
                        <li data-value="5001元-8000元">5001元-8000元</li>
                        <li data-value="8001元-12000元">8001元-12000元</li>
                        <li data-value="12001元-20000元">12001元-20000元</li>
                        <li data-value="20001元-50000元">20001元-50000元</li>
                        <li data-value="50001元以上">50001元以上</li>
                    </ul>
                </div>
            </div>

            <div class="form-group">
                <div style="margin-left: 5px;">城市&nbsp;&nbsp;</div>
                <div class="idealforms_select fl" style="width:50%;min-width: 100px;">
                    <div class="idealforms_select_obj">
                        <input type="hidden" value="" name="proivce">
                        <input type="text" value="" readonly>
                        <span class="icaret"></span>
                    </div>
                    <ul class="idealforms_select_menu">
                        <li data-value="0">请选择省</li>
                        <volist name="priovce" id="vo">
                            <li data-value="{$vo.aid}">{$vo.name}</li>
                        </volist>
                    </ul>
                </div>
                <div class="idealforms_select fl" style="width:50%;">
                    <div class="idealforms_select_obj">
                        <input type="hidden" value="" name="city">
                        <input type="text" value="" readonly>
                        <span class="icaret"></span>
                    </div>
                    <ul class="idealforms_select_menu">
                        <li data-value="0">请选择城市</li>
                    </ul>
                </div>
                <div class="clr"></div>
            </div>
            <div class="form-group tc">
                <div class=" next_btn clof" onclick=" $('#regbox').submit();" >注册</div>
            </div>
        </div>
        <div class="checkbox  font12 cloc">
            <span style="margin-left: 10%;display: none" onclick="$('#box_2').addClass('hide');$('#box_1').removeClass('hide');$(this).hide();" id="up">&lt;&lt;上一步</span>
            <span class="fr borderb-d tc ">已有账号,去<a href="/login/login.html">登录</a>！</span>
            <div class="clr"></div>
        </div>
    </form>
</div>
<script>
    $("#regbox").idealforms();
    $('.idealforms_select_menu').css({'max-height': '120px'});
    $('#regbox input[name=sex]').click(function(){
        $('#sextit').show();
    })
    /*阻塞标志，防止重复提交；预设不阻塞*/
    window.subBlock=false;
    $('#regbox').submit(function(){
        if(subBlock){
            return false;
        }
        subBlock = true;
        $.post('/login/reg', $('#regbox').serialize(), function(data){
            subBlock = false;
            if (data.code == 200) {
                clearpop(data.message,'',data.data);
            }else{
                clearpop(data.message,'',false);
            }
        });
    })

    function checkInput(){
        if(!$('#regbox input[name=nickname]').val()){
            clearpop('请输入用户名');
            $('#regbox input[name=nickname]').focus();
            return false;
        }
        var password = $('#regbox input[name=password]').val();
        if(!password){
            clearpop('请输入密码');
            $('#regbox input[name=password]').focus();
            return false;
        }
        if(password.length <4){
            clearpop('密码位数不能小于4');
            $('#regbox input[name=password]').focus();
            return false;
        }
        if(password != $('#regbox input[name=repassword]').val()){
            clearpop('两次密码输入不一致');
            $('#regbox input[name=repassword]').focus();
            return false;
        }
        var $email = $('#regbox input[name=email]').val()
        if($email && !regex($email,'email')){
            clearpop('邮箱格式不正确');
            $('#regbox input[name=repassword]').focus();
            return false;
        }
        $('#box_1').addClass('hide');
        $('#box_2').removeClass('hide');
        $('#up').show();
    }

    $('#regbox input[name=proivce]').parents().siblings('.idealforms_select_menu').find('li').click(function(){\
        if(parseInt($(this).data('value'))>0){
            checkeSupsort( $(this).data('value'), $('#regbox input[name=city]').parents().siblings('.idealforms_select_menu'));
        }
    })

</script>
</body>
</html>
